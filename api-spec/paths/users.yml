usersList:
  get:
    summary: Get users list
    description: Get list of users with optional search
    tags:
      - Users
    x-isSecure: true
    parameters:
      - name: search
        in: query
        required: false
        schema:
          type: string
        description: Search by username, first_name, or last_name
    responses:
      '200':
        description: Users list
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: integer
                  username:
                    type: string
                  email:
                    type: string
                  first_name:
                    type: string
                  last_name:
                    type: string
                  bio:
                    type: string
                    nullable: true
                  avatar_url:
                    type: string
                    nullable: true
                  created_at:
                    type: string
                    format: date-time
      '401':
        description: Not authenticated
        content:
          application/json:
            schema:
              $ref: '../openapi.yml#/components/schemas/Error'

userDetail:
  get:
    summary: Get user profile
    description: Get user profile by ID
    tags:
      - Users
    x-isSecure: true
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
    responses:
      '200':
        description: User profile
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
                username:
                  type: string
                email:
                  type: string
                first_name:
                  type: string
                last_name:
                  type: string
                bio:
                  type: string
                  nullable: true
                avatar_url:
                  type: string
                  nullable: true
                created_at:
                  type: string
                  format: date-time
                is_friend:
                  type: boolean
                friend_request_status:
                  type: string
                  nullable: true
                  enum: [null, pending_sent, pending_received]
      '401':
        description: Not authenticated
        content:
          application/json:
            schema:
              $ref: '../openapi.yml#/components/schemas/Error'
      '404':
        description: User not found
        content:
          application/json:
            schema:
              $ref: '../openapi.yml#/components/schemas/Error'

  put:
    summary: Update user profile
    description: Update own user profile
    tags:
      - Users
    x-isSecure: true
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              first_name:
                type: string
                maxLength: 150
              last_name:
                type: string
                maxLength: 150
              bio:
                type: string
                nullable: true
              avatar_url:
                type: string
                nullable: true
    responses:
      '200':
        description: Profile updated successfully
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
                username:
                  type: string
                email:
                  type: string
                first_name:
                  type: string
                last_name:
                  type: string
                bio:
                  type: string
                  nullable: true
                avatar_url:
                  type: string
                  nullable: true
                created_at:
                  type: string
                  format: date-time
      '400':
        description: Bad request
        content:
          application/json:
            schema:
              $ref: '../openapi.yml#/components/schemas/Error'
      '401':
        description: Not authenticated
        content:
          application/json:
            schema:
              $ref: '../openapi.yml#/components/schemas/Error'
      '403':
        description: Forbidden - can only update own profile
        content:
          application/json:
            schema:
              $ref: '../openapi.yml#/components/schemas/Error'
      '404':
        description: User not found
        content:
          application/json:
            schema:
              $ref: '../openapi.yml#/components/schemas/Error'
